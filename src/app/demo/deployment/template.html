<form [formGroup]="form">
  <x-form-section formGroupName="metadata">
    <x-form-section>
      <input
        (blur)="onBlur()"
        formControlName="name"
      />
    </x-form-section>
    <x-form-section>
      <select formControlName="namespace">
        <option
          value=""
          disabled
        >
          Choose a namespace
        </option>
        <option
          *ngFor="let namespace of namespaces"
          [ngValue]="namespace"
        >
          {{ namespace }}
        </option>
        <option
          *ngIf="!namespaces.includes(form.get('metadata.namespace')!.value)"
          [ngValue]="form.get('metadata.namespace')!.value"
        >
          {{ form.get('metadata.namespace')!.value }}
        </option>
      </select>
    </x-form-section>
    <x-form-section>
      <x-key-value-form
        (blur)="onBlur()"
        formControlName="labels"
      >
      </x-key-value-form>
    </x-form-section>
    <x-form-section>
      <x-key-value-form
        (blur)="onBlur()"
        formControlName="annotations"
      >
      </x-key-value-form>
    </x-form-section>
  </x-form-section>

  <x-form-section formGroupName="spec">
    <x-form-section>
      <input
        (blur)="onBlur()"
        type="number"
        formControlName="replicas"
      />
    </x-form-section>
    <x-form-section>
      <input
        (blur)="onBlur()"
        type="number"
        formControlName="revisionHistoryLimit"
      />
    </x-form-section>

    <x-form-section formGroupName="selector">
      <x-form-section>
        <x-key-value-form
          (blur)="onBlur()"
          formControlName="matchLabels"
        >
        </x-key-value-form>
      </x-form-section>
    </x-form-section>

    <x-form-section formGroupName="template">
      <x-form-section formGroupName="metadata">
        <x-form-section>
          <x-key-value-form
            (blur)="onBlur()"
            formControlName="labels"
          >
          </x-key-value-form>
        </x-form-section>
      </x-form-section>
      <x-form-section>
        <x-pod-spec-form formControlName="spec"></x-pod-spec-form>
      </x-form-section>
    </x-form-section>
  </x-form-section>
</form>
